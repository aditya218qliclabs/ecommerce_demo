<div class="progress">
  <div id="progress-bar" class="progress-bar" role="progressbar" style="width: 0%"></div>
</div>

<script>
function update_progress() {
  $.ajax({
    url: '/get_task_progress/',
    data: {'task_id': '{{ task_id }}'},
    success: function(data) {
      $('#progress-bar').css('width', data.progress + '%');
      if (data.progress < 100) {
        setTimeout(update_progress, 1000);
      }
    }
  });
}

$(document).ready(function() {
  update_progress();
});
</script>
